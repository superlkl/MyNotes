# 反射

## 概念

相信很多人都知道反射可以说是Java中最强大的技术了，它可以做的事情太多太多，很多优秀的开源框架都是通过反射完成的，比如最初的很多注解框架，后来因为java反射影响性能，所以被运行时注解APT替代了，java反射有个开源框架jOOR相信很多人都用过，不过我们还是要学习发射的基础语法，这样才能自己写出优秀的框架，当然这里所讲的反射技术，是学习Android插件化技术、Hook技术等必不可少的！

**一、简单的反射测试**

1. **获取类的构造函数**
2. **获取类的所有构造方法**
3.  **获取类中特定的构造方法**
4. **调用类的私有方法**

```java
public class Book{

    private String name;
    private String author;

    //1
    public Book() {
    }

    //2
    private Book(String name, String author) {
        this.name = name;
        this.author = author;
    }

    //3
    private Book(String name,int age) {
        this.name = name;
    }

}
```



```java
  public static void main(String[] args) {
       Book book=new Book();
       Class c=book.getClass();
       System.out.println(c);
       //装载类的数组
        Constructor[] constructors;
        //getDeclaredClasses()返回一个数组，数组中包含该类中所有类和接口类的对象
        constructors=c.getDeclaredConstructors();
        for (int i=0;i<constructors.length;i++){
            //getModifiers可以得到构造方法的类型
            System.out.println(Modifier.toString(constructors[i].getModifiers())+"参数");
            //getParameterTypes可以得到构造方法的所有参数
            Class[] parameterTypes=constructors[i].getParameterTypes();
            for (int j=0;j<parameterTypes.length;j++){
                System.out.println(parameterTypes[j].getName()+" ");
            }
            System.out.println(" ");
        }
    }
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191204143543996.png)

用getClass方法可以得到我们的包名，用getDeclaredClasses()返回一个数组，数组中包含该类中所有类和接口类

的对象，遍历这个对象数组，得到构造方法的类型，有几个构造方法constructors.length的长度就是多少，再用

getParameterTypes()取得每个构造函数的参数类型，遍历输出