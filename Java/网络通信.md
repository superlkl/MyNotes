# `IP`地址

## 网络地址和主机地址

如今的[IP网络](https://www.baidu.com/s?wd=IP网络&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)使用32位地址，以[点分十进制](https://www.baidu.com/s?wd=点分十进制&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)表示，如192.168.0.1。

地址格式为：<u>`IP`地址=网络地址+[主机地址](https://www.baidu.com/s?wd=主机地址&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)或 `IP`地址=网络地址+子网地址+[主机地址](https://www.baidu.com/s?wd=主机地址&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)</u>。

 网络地址是因特网协会的`ICANN`分配的，下有负责北美地区的`InterNIC`、负责欧洲地区的`RIPENIC`和负责[亚太地区](https://www.baidu.com/s?wd=亚太地区&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)的`APNIC` 目的是为了保证网络地址的全球唯一性。[主机地址](https://www.baidu.com/s?wd=主机地址&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)是由各个网络的系统管理员分配。因此，网络地址的唯一性与网络内主机地址的唯一性确保了`IP`地址的全球唯一性。 

## 1. 查看网络地址 

在`cmd`窗口输入命名`ipconfig`

![在这里插入图片描述](https://img-blog.csdnimg.cn/2019112713342533.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

红框处就是自己的`ip`地址

## 2. 查看主机地址 

直接百度`IP`地址

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133443170.png)

 `IP`地址等于就是你家的地址，必要时相关部门根据`IP`地址就可以找到你，这是最简单的理解。 

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133453250.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70) 

# `IPv4`的`IP`地址

## 一、前言

  - 说起地址，大家都不陌生，现实生活中的地址都是xx省xx市xx区xx街xx小区xx栋xx楼xx室，每个地址都是唯一的，不会出现两个不同的地方地址完全一样的情况。根据一个人的居住地址，我们可以准确无误的找到这个人。
  - 在没有互联网和电话之前，相隔两地的人进行沟通主要通过信件，我们在信封上写上收件人地址，邮递员就可以通过这个地址找到收件人并把信交给他。如今已经是互联网时代，几乎每个人都有一台或多台电脑、手机设备，我们进行沟通不再需要通过信件，<u>我们只需要在自己电脑编辑好内容就可以准确无误的发送到对方电脑上。那这到底是如何实现的呢？它是如何找到对方电脑的呢？其实这和邮递员送信件是一样的原理，每台电脑都有一个地址，也就是我们常说的`IP`地址</u>(Internet Protocol Address，互联网协议地址)，只不过这个地址的表述方式和我们现实生活中的地址不一样。

## 二、`IP`地址的格式

  互联网发展至今，互联网协议经历了多个版本，不同的互联网协议版本`IP`地址的表述方式也不一样，我们常见的类似192.168.1.2这种格式的就是`IPv4`(Internet Protocol version 4，互联网协议版本4)。就目前来说，我们平时所说的`IP`地址就是指`IPv4`协议下的`IP`地址。<u>`IPv4`的`IP`地址由4段组成，段之间用点隔开，每段由8位二进制数组成，所以</u><u>其范围用二进制表示就是00000000-11111111，用十进制表示就是0-255之间</u>。所以`IP`地址由4段共32位组成，其二进制范围是00000000.00000000.00000000.00000000—11111111.11111111.11111111.11111111，<u>十进制表示就是0.0.0.0–255.255.255.255</u>，一共是![2^{32}](https://math.jianshu.com/math?formula=2%5E%7B32%7D)(4294967296，近43亿)个`IP`地址。

（2的32次方：二进制有0和1两个数，每段8个二进制数，共有4段组成，所以就是2的32次方个数=43亿）

## 三、`IP`地址的分类

  `IP`地址共分A、B、C、D、E五类，其中A、B、C三类`IP`地址是我们常用的`I`P地址，它包括网络地址和主机地址2个部分，我们根据网络地址和主机地址占用的位数的不同分为A、B、C三类。D类`IP`地址一般用于多点广播。E类`IP`地址是保留地址。

#### 1. A类`IP`地址

  如下图所示，A类`IP`地址的前8位是网络地址，<u>网络地址第一位必须是0，所以有2^7=128个A类网络地址</u>，而全0网络地址(00000000)被保留用于指定默认路由，127网络地址(01111111)被保留用于诊断，所以<u>A类网络地址实际只有126个。</u>
  每个A类`IP`地址的后24位表示主机地址，但由于<u>全0和全1的主机地址被保留</u>，所以一个A类网段最大包含![2^{24}](https://math.jianshu.com/math?formula=2%5E%7B24%7D)-2=16777214个节点。
 所以A类`IP`地址范围是1.0.0.1—126.255.255.254，可用网络有126个，每个网络能容纳16777214个主机，一般用于大型网络。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133536946.png)

#### 2. B类`IP`地址

  B类`IP`地址的前16位是网络地址，网络地址的前两位必须是10，所以B类网络地址共有![2^{14}](https://math.jianshu.com/math?formula=2%5E%7B14%7D)=16384个。后16位是主机地址，但全0和全1的主机地址被保留，所以每个B类网络可以容纳![2^{16}](https://math.jianshu.com/math?formula=2%5E%7B16%7D)-2=65534台主机。B类IP地址的范围是128.0.0.1-191.255.255.254(二进制为10000000.00000000.00000000.00000001 - 10111111.11111111.11111111.11111110)。B类`IP`地址一般用于中型网络。


![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133547375.png)

#### 3. C类`IP`地址

  C类`IP`地址的前24位是网络地址，网络地址的前两位必须是110，所以C类网络地址共有![2^{21}](https://math.jianshu.com/math?formula=2%5E%7B21%7D)=2097152个。后8位是主机地址，但全0和全1的主机地址被保留，所以每个C类网络可以容纳![2^8](https://math.jianshu.com/math?formula=2%5E8)-2= 254台主机。C类`IP`地址的范围是192.0.0.1-233.255.255.254(二进制为11000000.00000000.00000000.00000001 - 11011111.11111111.11111111.11111110)。C类`IP`地址一般用于小型网络。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133557918.png)



#### 4. D类`IP`地址

D类`IP`地址是以`1110`开头的`IP`地址，它们不指向特定的网络，一般用于多点广播中，多点广播地址用来一次寻址一组计算机。其地址范围为224.0.0.1--239.255.255.254。


![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133603396.png)



#### 5. E类`IP`地址

E类`IP`地址是以`1111`开头的`IP`地址，为保留地址。其地址范围为240.0.0.1--255.255.255.254。


![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133620206.png)

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191127133631140.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

# TCP
Transmission Control Protocol
TCP 是传输控制协议，是一种面向连接的，可靠的，基于字节流的传输层协议；
与` UDP` 一样完成第四层传输层所指定的功能与职责；

## TCP 能做什么
聊天消息传输、推送；
单人语音、视频聊天；
几乎 `UDP` 能做的都能做，但需要考虑复杂性和性能的问题；
限制：无法进行广播、多播操作；

## 核心 `API`

socket()：创建无连接的，无绑定的客户端 Socket，一般用这个空的构造方法，因为连接一旦建立，其中的值就无法修改了；
bind()：绑定一个 Socket 到一个本地地址和端口上；

## TCP 连接可靠性

### 三次握手

A：你能听到我说话吗？
B：我能听到你说话，你能听到我说话吗？
A：我能听到你说话。
三次握手确定了一件事：客户端和服务端可以相互听见对方说的话，即全双工；
其中携带的随机数是必要的，在多客户端向服务端发起连接的时候，随机数充当了电话号码的角色；

> **1、客户端发送请求【寻址请求】**
> **2、服务器端收到报文请求，回应客户端【确认请求】**
> **3、客户端收到服务端的报文进行回应。【连接请求】**
> **三次握手完成，TCP客户端和服务端成功地建立连接，可以传输数据。**

### 四次挥手

A：我想和你断开连接，可以吗？
B：可以。（A 的发送流断开，B的接收流断开）
B：我想和你断开连接，可以吗？
A：可以。（B的发送流断开，A的接收流断开）

> **1、数据验证请求码**
> **2、传输结束标记**
> **3、确认结束标记**
> **4、连接断开标记**

## TCP 传输可靠性

先拆分成过个片段，再排序，发送的时候顺序发送，接收的时候顺序组装；
如果某个片段在传输过程中丢弃或超时，客户端会重发；

# `TCP`和`UDP`的区别

**区别：**

1. TCP提供的是面向连接的、可靠的数据流传输；`UDP`提供的是非面向连接的、不可靠的数据流传输。TCP提供可靠的
2. 服务，通过TCP连接传送的数据，无差错、不丢失、不重复，按序到达；`UDP`尽最大努力交付，即不保证可靠交付。
3. TCP面向字节流；`UDP`面向报文。
4. TCP连接只能是点到点的；`UDP`支持一对一、一对多、多对一和多对多的交互通信。
5. `UDP`具有较好的实时性，工作效率比TCP高，适用于对高速传输和实时性有较高的通信或广播通信。
6. TCP对系统资源要求较多，`UDP`对系统资源要求较少。TCP首部有20字节；`UDP`的首部只有8个字节。
7. TCP的逻辑通信信道是全双工的可靠信道；`UDP`的逻辑通信信道是不可靠信道。

#  网络中进程通信 

##  网络中进程之间如何通信？ 

> **我们每天打开浏览器浏览网页 时，浏览器的进程怎么与web服务器通信的？当你用`QQ`聊天时，`QQ`进程怎么与服务器或你好友所在的`QQ`进程通信？这些都得靠socket？那什么是 socket？socket的类型有哪些？还有socket的基本函数**

 本地的进程间通信`（IPC）`有很多种方式，但可以总结为下面4类： 

1. 消息传递（管道、FIFO、消息队列）
2. 同步（互斥量、条件变量、读写锁、文件和写记录锁、信号量）
3. 共享内存（匿名的和具名的）
4. 远程过程调用（`Solaris`门和`Sun RPC`） 

**进程之间如何通信？**首要解决的问题是如何唯一标识一个进程，否则通信无从谈起！在本地可以通过进程`PID`来唯一标识一个进程，但是在网络中这是行不通的。其实`TCP/IP`协议族已经帮我们解决了这个问题，网络层的“`IP`地址”可以唯一标识网络中的主机，而传输层的“协议+端口”可以唯一标识主机中的应用程序（进程）。这样利用三元组（`IP`地址，协议，端口）就可以标识网络的进程了，网络中的进程通信就可以利用这个标志与其它进程进行交互。 

使用`TCP/IP`协议的应用程序通常采用应用编程接口：UNIX BSD的套接字（socket）和UNIX System V的`TLI`（已经被淘汰），来实现网络进程之间的通信。就目前而言，<u>几乎所有的应用程序都是采用socket，而现在又是网络时代，网络中进程通信是无处不在，这就是我为什么说“一切皆socket”</u>。 

##  什么是Socket 

 socket起源于Unix，而Unix/Linux基本哲学之一就是“一切皆文件”，都可以用“打开open –> 读写write/read –> 关闭close”模式来操作。我的理解就是Socket就是该模式的一个实现，socket即是一种特殊的文件，一些socket函数就是对其进行的操作（读/写IO、打开、关闭），这些函数我们在后面进行介绍。 

##  socket的基本操作 

既然socket是“open—write/read—close”模式的一种实现，那么socket就提供了这些操作对应的函数接口。下面以TCP为例，介绍几个基本的socket接口函数。 