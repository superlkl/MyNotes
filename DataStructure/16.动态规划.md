# åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰

- åŠ¨æ€è§„åˆ’ï¼Œç®€ç§°DP ï¼šæ˜¯æ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜çš„ä¸€ç§å¸¸ç”¨ç­–ç•¥
- é€šå¸¸çš„ä½¿ç”¨å¥—è·¯ï¼ˆä¸€æ­¥ä¸€æ­¥ä¼˜åŒ–ï¼‰ 
  1. æš´åŠ›é€’å½’ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼Œå‡ºç°äº†é‡å å­é—®é¢˜ï¼‰ 
  2. è®°å¿†åŒ–æœç´¢ï¼ˆè‡ªé¡¶å‘ä¸‹ï¼‰ 
  3. é€’æ¨ï¼ˆè‡ªåº•å‘ä¸Šï¼‰

## å¸¸è§„æ­¥éª¤

- åŠ¨æ€è§„åˆ’ä¸­çš„â€œåŠ¨æ€â€å¯ä»¥ç†è§£ä¸ºæ˜¯â€œä¼šå˜åŒ–çš„çŠ¶æ€â€

1. å®šä¹‰çŠ¶æ€ï¼ˆçŠ¶æ€æ˜¯åŸé—®é¢˜ã€å­é—®é¢˜çš„è§£ï¼‰ 
   - æ¯”å¦‚å®šä¹‰ dp(i) çš„å«ä¹‰
2. è®¾ç½®åˆå§‹çŠ¶æ€ï¼ˆè¾¹ç•Œï¼‰ 
   - æ¯”å¦‚è®¾ç½® dp(0) çš„å€¼
3. ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ 
   - æ¯”å¦‚ç¡®å®š dp(i) å’Œ dp(i â€“ 1) çš„å…³ç³»

## ä¸€äº›ç›¸å…³æ¦‚å¿µ

- ç»´åŸºç™¾ç§‘çš„è§£é‡Š ï¼šDynamic Programming is a method for solving a complex problem by breaking it down into a collection of simpler subproblems, solving each of those subproblems just once, and storing their solutions. 
  1. å°†å¤æ‚çš„åŸé—®é¢˜æ‹†è§£æˆè‹¥å¹²ä¸ªç®€å•çš„å­é—®é¢˜
  2. æ¯ä¸ªå­é—®é¢˜ä»…ä»…è§£å†³1æ¬¡ï¼Œå¹¶ä¿å­˜å®ƒä»¬çš„è§£ 
  3. æœ€åæ¨å¯¼å‡ºåŸé—®é¢˜çš„è§£
- å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³çš„é—®é¢˜ï¼Œé€šå¸¸å…·å¤‡2ä¸ªç‰¹ç‚¹ 
  - æœ€ä¼˜å­ç»“æ„ï¼ˆæœ€ä¼˜åŒ–åŸç†ï¼‰ï¼šé€šè¿‡æ±‚è§£å­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œå¯ä»¥è·å¾—åŸé—®é¢˜çš„æœ€ä¼˜è§£
  - æ— åæ•ˆæ€§
- æ— åæ•ˆæ€§
  - æŸé˜¶æ®µçš„çŠ¶æ€ä¸€æ—¦ç¡®å®šï¼Œåˆ™æ­¤åè¿‡ç¨‹çš„æ¼”å˜ä¸å†å—æ­¤å‰å„çŠ¶æ€åŠå†³ç­–çš„å½±å“ï¼ˆæœªæ¥ä¸è¿‡å»æ— å…³ï¼‰ 
  - åœ¨æ¨å¯¼åé¢é˜¶æ®µçš„çŠ¶æ€æ—¶ï¼Œåªå…³å¿ƒå‰é¢é˜¶æ®µçš„å…·ä½“çŠ¶æ€å€¼ï¼Œä¸å…³å¿ƒè¿™ä¸ªçŠ¶æ€æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥æ¨å¯¼å‡ºæ¥çš„

## æ— åæ•ˆæ€§

![image-20200318000127124](å›¾ç‰‡.assets/image-20200318000127124.png)

## æœ‰åæ•ˆæ€§

![image-20200318000143047](å›¾ç‰‡.assets/image-20200318000143047.png)

# æ‰¾é›¶é’±

- å‡è®¾æœ‰25åˆ†ã€20åˆ†ã€5åˆ†ã€1åˆ†çš„ç¡¬å¸ï¼Œç°è¦æ‰¾ç»™å®¢æˆ·41åˆ†çš„é›¶é’±ï¼Œå¦‚ä½•åŠåˆ°ç¡¬å¸ä¸ªæ•°æœ€å°‘ï¼Ÿ 
- æ­¤å‰ç”¨è´ªå¿ƒç­–ç•¥å¾—åˆ°çš„å¹¶éæ˜¯æœ€ä¼˜è§£ï¼ˆè´ªå¿ƒå¾—åˆ°çš„è§£æ˜¯ 5 æšç¡¬å¸ï¼‰
- å‡è®¾ dp(n) æ˜¯å‡‘åˆ° n åˆ†éœ€è¦çš„æœ€å°‘ç¡¬å¸ä¸ªæ•° 
  - å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 25 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 25) + 1 
  - å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 20 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 20) + 1 
  - å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 5 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 5) + 1 
  - å¦‚æœç¬¬ 1 æ¬¡é€‰æ‹©äº† 1 åˆ†çš„ç¡¬å¸ï¼Œé‚£ä¹ˆ dp(n) = dp(n â€“ 1) + 1 
  - æ‰€ä»¥ dp(n) = min { dp(n â€“ 25), dp(n â€“ 20), dp(n â€“ 5), dp(n â€“ 1) } + 1

## æš´åŠ›é€’å½’

- è‡ªé¡¶å‘ä¸‹çš„è°ƒç”¨ï¼Œå‡ºç°äº†é‡å å­é—®é¢˜

```java
//æ˜ç¡®å‡½æ•°çš„ä½œç”¨ï¼Œæ‰¾åˆ°å‡‘é½nå…ƒæ‰€éœ€è¦çš„æœ€å°‘ç¡¬å¸ä¸ªæ•°
static int coins1(int n) {
    //é€’å½’åŸºï¼šä¸åˆç†æƒ…å†µ
    if (n < 1) return Integer.MAX_VALUE;
    //é€’å½’åŸºï¼šèƒ½è§£å†³é—®é¢˜çš„ç­”æ¡ˆ
    if (n == 25 || n == 20 || n == 5 || n == 1) return 1;
    //é€‰æœ€å°‘çš„ç¡¬å¸ç»“æœ
    int min1 = Math.min(coins1(n - 25), coins1(n - 20));
    int min2 = Math.min(coins1(n - 5), coins1(n - 1));
    //æœ€åè¿˜è¦åŠ ä¸Šç¬¬ä¸€æ¬¡é€‰å–çš„ç¡¬å¸
    return Math.min(min1, min2) + 1;
}
```

- ç±»ä¼¼äºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’ç‰ˆï¼Œä¼šæœ‰å¤§é‡çš„é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦è¾ƒé«˜

## è®°å¿†åŒ–æœç´¢

- è‡ªé¡¶å‘ä¸‹çš„è°ƒç”¨

```java
static int coins2(int n) {
    if (n < 1) return -1;
    //dp[n]ä»£è¡¨çš„æ˜¯å‡‘é½nå…ƒæ‰€éœ€è¦çš„ç¡¬å¸ä¸ªæ•°
    //è‹¥næ˜¯41ï¼Œæ ¹æ®æ•°ç»„ä¸‹æ ‡ï¼Œè¦dp[41]å–å‡ºä¸º41ï¼Œæ•°ç»„å¤§å°ä¸º42
    int[] dp = new int[n + 1];
    int[] faces = {1, 5, 20, 25};
    for (int face : faces) {
        //å¦‚æœè¦æ‰¾çš„å‰æ¯”å½“å‰æ‰‹é‡Œçš„ç¡¬å¸é¢å€¼è¿˜å°å°±é€€å‡º
        if (n < face) break;
        dp[face] = 1;
    }
    //dpé‡Œé¢å­˜å‚¨ç€å¯ä½¿ç”¨å¤§å°çš„é¢å€¼é›¶é’±
    return coins2(n, dp);
}

static int coins2(int n, int[] dp) {
    if (n < 1) return Integer.MAX_VALUE;
    //æŠŠdp[n]çš„ç»“æœä¿å­˜èµ·æ¥ä¸ç”¨æ¯æ¬¡éƒ½é‡å¤è®¡ç®—
    if (dp[n] == 0) {
        int min1 = Math.min(coins2(n - 25, dp), coins2(n - 20, dp));
        int min2 = Math.min(coins2(n - 5, dp), coins2(n - 1, dp));
        dp[n] = Math.min(min1, min2) + 1;
    }
    return dp[n];
}
```

## é€’æ¨

- è‡ªåº•å‘ä¸Šï¼Œåˆ†åˆ«å‡º1å…ƒé’±åˆ°nå…ƒé’±æ‰€éœ€è¦çš„æœ€å°‘ç¡¬å¸ä¸ªæ•°
- å¦‚æœæ˜¯1å…ƒé’±å¯ä»¥å…ˆçœ‹0å…ƒé’±éœ€è¦å¤šå°‘æšç¡¬å¸
- å¦‚æœæ˜¯5å…ƒé’±å¯ä»¥å…ˆçœ‹4å…ƒé’±éœ€è¦å¤šå°‘æšç¡¬å¸

```java
static int coins3(int n) {
    if (n < 1) return -1;
    int[] dp = new int[n + 1];
    for (int i = 1; i <= n; i++) {
        int min = dp[i - 1];
        //å¦‚æœæ˜¯5å…ƒé’±å°±çœ‹æ˜¯ç›´æ¥æ‰¾5å…ƒçš„ç¡¬å¸å’Œä¹‹å‰4å…ƒé’±æ‰€éœ€è¦çš„ç¡¬å¸æ•°è°æœ€å°å°±å–è°ï¼Œdp[0]åœ¨æ•°ç»„ä¸­é»˜è®¤ä¸º0ï¼Œæ°å¥½å¯ä»¥åˆ©ç”¨
        if (i >= 5) min = Math.min(dp[i - 5], min);
        //è¿™é‡Œçš„-5ï¼Œ-20ï¼Œ-25éƒ½æ˜¯ä¸ºäº†åˆ©ç”¨dp[0]=0çš„ä¾¿åˆ©
        if (i >= 20) min = Math.min(dp[i - 20], min);
        if (i >= 25) min = Math.min(dp[i - 25], min);
        dp[i] = min + 1;
    }
    return dp[n];
}
```

## æ€è€ƒé¢˜

- è¯·è¾“å‡ºæ‰¾é›¶é’±çš„å…·ä½“æ–¹æ¡ˆï¼ˆå…·ä½“æ˜¯ç”¨äº†å“ªäº›é¢å€¼çš„ç¡¬å¸ï¼‰

```java
static int coins4(int n) {
    if (n < 1) return -1;
    int[] dp = new int[n + 1];
    // faces[i]æ˜¯å‡‘å¤Ÿiåˆ†æ—¶æœ€åé‚£æšç¡¬å¸çš„é¢å€¼
    int[] faces = new int[dp.length];
    for (int i = 1; i <= n; i++) {
        int min = dp[i - 1];
        faces[i] = 1;

        if (i >= 5 && dp[i - 5] < min) {
            min = dp[i - 5];
            faces[i] = 5;
        }
        if (i >= 20 && dp[i - 20] < min) {
            min = dp[i - 20];
            faces[i] = 20;
        }
        if (i >= 25 && dp[i - 25] < min) {
            min = dp[i - 25];
            faces[i] = 25;
        }
        dp[i] = min + 1;
        print(faces, i);
    }
    //print(faces, n);
    return dp[n];
}

static void print(int[] faces, int n) {
    System.out.print("[" + n + "] = ");
    while (n > 0) {
        System.out.print(faces[n] + " ");
        n -= faces[n];
    }
    System.out.println();
}
```

##  é€šç”¨å®ç°

```java
static int coins5(int n, int[] faces) {
    if (n < 1 || faces == null || faces.length == 0) return -1;
    int[] dp = new int[n + 1];
    for (int i = 1; i <= n; i++) {
        int min = Integer.MAX_VALUE;
        for (int face : faces) {
            if (i < face) continue;
            int v = dp[i - face];
            if (v < 0 || v >= min) continue;
            min = v;
        }
        if (min == Integer.MAX_VALUE) {
            dp[i] = -1;
        } else {
            dp[i] = min + 1;
        }
    }
    return dp[n];
}
```

# æœ€å¤§è¿ç»­å­åºåˆ—å’Œ

>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°åºåˆ—ï¼Œæ±‚å®ƒçš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œ ã€‚
>
>æ¯”å¦‚-2, 1, -3, 4, -1, 2, 1, -5, 4 çš„æœ€å¤§è¿ç»­å­åºåˆ—å’Œæ˜¯ 4 + (â€“1) + 2 + 1 = 6

![image-20200318000303369](å›¾ç‰‡.assets/image-20200318000303369.png)

## çŠ¶æ€è½¬ç§»æ–¹ç¨‹å’Œåˆå§‹çŠ¶æ€

- çŠ¶æ€è½¬ç§»æ–¹ç¨‹ 
  - å¦‚æœ dp(i â€“ 1) â‰¤ 0ï¼Œé‚£ä¹ˆ dp(i) = nums[i] 
  - å¦‚æœ dp(i â€“ 1) > 0ï¼Œé‚£ä¹ˆ dp(i) = dp(i â€“ 1) + nums[i]
- åˆå§‹çŠ¶æ€ 
  - dp(0) çš„å€¼æ˜¯ nums[0]
- æœ€ç»ˆçš„è§£ 
  - æœ€å¤§è¿ç»­å­åºåˆ—å’Œæ˜¯æ‰€æœ‰ dp(i) ä¸­çš„æœ€å¤§å€¼ max { dp(i) }ï¼Œi âˆˆ [0, nums.length) 

## åŠ¨æ€è§„åˆ’ â€“ å®ç°

```java
static int maxSubArray1(int[] nums) {
    if (nums == null || nums.length == 0) return 0;
    //è®°å½•ä»¥num[x]ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œ
    int[] dp = new int[nums.length];
    //ä»¥num[0]ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œæ˜¯dp[0]
    dp[0] = nums[0];
    int maxSum = dp[0];
    //ä»å‰å¾€åéå†æ•´ä¸ªåºåˆ—
    for (int i = 1; i < dp.length; i++) {
        //æ‹¿åˆ°ä»¥ i-1 ç»“å°¾çš„æœ€å¤§å­åºåˆ—å’Œ
        int prev = dp[i - 1];
        //å¦‚æœå°äºç­‰äºï¼Œå°±è¯´æ˜åŠ ä¸Šå‰ i-1 ä¸ªå­åºåˆ—å’Œä¼šæ›´å°æˆ–ä¸å˜
        if (prev <= 0) {
            dp[i] = nums[i];
        } else {
            dp[i] = prev + nums[i];
        }
        maxSum = Math.max(dp[i], maxSum);
    }
    return maxSum;
}
```

## åŠ¨æ€è§„åˆ’ â€“ ä¼˜åŒ–å®ç°

- ä¸Šé¢çš„æ–¹æ³•éå¸¸æµªè´¹æ•°ç»„ç©ºé—´ï¼Œå¯¹äºä»¥ç¬¬ i ä¸ªæ•°ç»“å°¾çš„å¤§è¿ç»­å­åºåˆ—çš„å’Œæˆ‘ä»¬åªå…³å¿ƒç¬¬ i-1 ä¸ªæ•°ç»“å°¾çš„å¤§è¿ç»­å­åºåˆ—çš„å’Œ

```java
static int maxSubArray2(int[] nums) {
    if (nums == null || nums.length == 0) return 0;
    int dp = nums[0];
    int max = dp;
    for (int i = 1; i < nums.length; i++) {
        if (dp <= 0) {
            dp = nums[i];
        } else {
            dp = dp + nums[i];
        }
        max = Math.max(dp, max);
    }
    return max;
}
```

# æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆLISï¼‰

>æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼ˆæœ€é•¿é€’å¢å­åºåˆ—ï¼ŒLongest Increasing Subsequenceï¼ŒLISï¼‰
>
>ç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°åºåˆ—ï¼Œæ±‚å‡ºå®ƒæœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ï¼ˆè¦æ±‚ä¸¥æ ¼ä¸Šå‡ï¼‰ 
>
>æ¯”å¦‚ [10, 2, 2, 5, 1, 7, 101, 18] çš„æœ€é•¿ä¸Šå‡å­åºåˆ—æ˜¯ [2, 5, 7, 101]ã€[2, 5, 7, 18]ï¼Œé•¿åº¦æ˜¯ 4

## åŠ¨æ€è§„åˆ’ â€“ çŠ¶æ€å®šä¹‰

- å‡è®¾æ•°ç»„æ˜¯ numsï¼Œ [10, 2, 2, 5, 1, 7, 101, 18] 

![image-20200318000603659](å›¾ç‰‡.assets/image-20200318000603659.png)

## åŠ¨æ€è§„åˆ’ â€“ çŠ¶æ€è½¬ç§»æ–¹ç¨‹

![image-20200318000629377](å›¾ç‰‡.assets/image-20200318000629377.png)

## åŠ¨æ€è§„åˆ’ â€“ å®ç°

```java
static int lengthOfLIS1(int[] nums) {
    if (nums == null || nums.length == 0) return 0;
    int[] dp = new int[nums.length];
    int max = dp[0] = 1;
    for (int i = 1; i < dp.length; i++) {
        dp[i] = 1;
        for (int j = 0; j < i; j++) {
            if (nums[i] <= nums[j]) continue;
            dp[i] = Math.max(dp[i], dp[j] + 1);
        }
        max = Math.max(dp[i], max);
    }
    return max;
}
```

## äºŒåˆ†æœç´¢ â€“ æ€è·¯

![image-20200318000703413](å›¾ç‰‡.assets/image-20200318000703413.png)

- æŠŠæ¯ä¸ªæ•°å­—çœ‹åšæ˜¯ä¸€å¼ æ‰‘å…‹ç‰Œï¼Œä»å·¦åˆ°å³æŒ‰é¡ºåºå¤„ç†æ¯ä¸€ä¸ªæ‰‘å…‹ç‰Œ 

- å°†å®ƒå‹åœ¨ï¼ˆä»å·¦è¾¹æ•°è¿‡æ¥ï¼‰ç¬¬ä¸€ä¸ªç‰Œé¡¶ â‰¥ å®ƒçš„ç‰Œå †ä¸Šé¢ 
- å¦‚æœæ‰¾ä¸åˆ°ç‰Œé¡¶ â‰¥ å®ƒçš„ç‰Œå †ï¼Œå°±åœ¨æœ€å³è¾¹æ–°å»ºä¸€ä¸ªç‰Œå †ï¼Œå°†å®ƒæ”¾å…¥è¿™ä¸ªæ–°ç‰Œå †ä¸­

![image-20200318000726706](å›¾ç‰‡.assets/image-20200318000726706.png)

- å½“å¤„ç†å®Œæ‰€æœ‰ç‰Œï¼Œæœ€ç»ˆç‰Œå †çš„æ•°é‡å°±æ˜¯æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦
- æ€è·¯ï¼ˆå‡è®¾æ•°ç»„æ˜¯ numsï¼Œä¹Ÿå°±æ˜¯æœ€åˆçš„ç‰Œæ•°ç»„ï¼‰ 
  - top[i] æ˜¯ç¬¬ i ä¸ªç‰Œå †çš„ç‰Œé¡¶ï¼Œlen æ˜¯ç‰Œå †çš„æ•°é‡ï¼Œåˆå§‹å€¼ä¸º 0 
  - éå†æ¯ä¸€å¼ ç‰Œ num 
    - åˆ©ç”¨äºŒåˆ†æœç´¢æ‰¾å‡º num æœ€ç»ˆè¦æ”¾å…¥çš„ç‰Œå †ä½ç½® index 
    - num ä½œä¸ºç¬¬ index ä¸ªç‰Œå †çš„ç‰Œé¡¶ï¼Œtop[index] = num 
    - å¦‚æœ index ç­‰äº lenï¼Œç›¸å½“äºæ–°å»ºä¸€ä¸ªç‰Œå †ï¼Œç‰Œå †æ•°é‡ +1ï¼Œä¹Ÿå°±æ˜¯ len++

## æ™®é€šå®ç°

```java
static int lengthOfLIS2(int[] nums) {
    if (nums == null || nums.length == 0) return 0;
    // ç‰Œå †çš„æ•°é‡
    int len = 0;
    // ç‰Œé¡¶æ•°ç»„
    int[] top = new int[nums.length];
    // éå†æ‰€æœ‰çš„ç‰Œ
    for (int num : nums) {
        int j = 0;
        while (j < len) {
            // æ‰¾åˆ°ä¸€ä¸ª>=numçš„ç‰Œé¡¶
            if (top[j] >= num) {
                top[j] = num;
                break;
            }
            // ç‰Œé¡¶ < num
            j++;
        }
        if (j == len) { // æ–°å»ºä¸€ä¸ªç‰Œå †
            len++;
            //æŠŠnumè¿™å¼ ç‰Œæ”¾åœ¨ç‰Œé¡¶
            top[j] = num;
        }
    }
    return len;
}
```

## äºŒåˆ†æœç´¢ â€“ å®ç°

```java
static int lengthOfLIS3(int[] nums) {
    if (nums == null || nums.length == 0) return 0;
    // ç‰Œå †çš„æ•°é‡
    int len = 0;
    // ç‰Œé¡¶æ•°ç»„
    int[] top = new int[nums.length];
    // éå†æ‰€æœ‰çš„ç‰Œ
    for (int num : nums) {
        int begin = 0;
        int end = len;
        while (begin < end) {
            int mid = (begin + end) >> 1;
            if (num <= top[mid]) {
                end = mid;
            } else {
                begin = mid + 1;
            }
        }
        // è¦†ç›–ç‰Œé¡¶
        top[begin] = num;
        // æ£€æŸ¥æ˜¯å¦è¦æ–°å»ºä¸€ä¸ªç‰Œå †
        if (begin == len) len++;
    }
    return len;
}
```

# æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰

>æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLongest Common Subsequenceï¼ŒLCSï¼‰

![image-20200318000947754](å›¾ç‰‡.assets/image-20200318000947754.png)

## æ€è·¯

![image-20200318001007546](å›¾ç‰‡.assets/image-20200318001007546.png)

## é€’å½’å®ç°

```java
static int lcs1(int[] num1, int[]  num2){
    //æ’é™¤éæ³•æƒ…å†µ
    if (num1 == null || num2 == null) return 0;
    if (num1.length == 0 || num2.length ==0) return 0;
    return lcs1(num1,num1.length,num2,num2.length);
}

//æ˜ç¡®é€’å½’å‡½æ•°çš„ä½œç”¨ï¼šæ±‚nums1å‰iä¸ªå…ƒç´ å’Œnums2å‰jä¸ªå…ƒç´ çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦
static int lcs1(int[] num1, int len1, int[]num2, int len2){
    //é€’å½’åŸº
    if (len1 == 0 || len2 == 0) return 0;
    if (num1[len1 - 1] == num2[len2 - 1]){
        return lcs1(num1,len1-1,num2,len2-1)+1;
    }else {
        return Math.max(lcs1(num1,len1-1,num2,len2),
                        lcs1(num1,len1,num2,len2-1));
    }
}
```

## é€’å½’å®ç°åˆ†æ

![image-20200318001037173](å›¾ç‰‡.assets/image-20200318001037173.png)

## åŠ¨æ€è§„åˆ’

![image-20200318001106470](å›¾ç‰‡.assets/image-20200318001106470.png)

```javascript
static int lcs2(int[] num1, int[] num2){
    //æ’é™¤éæ³•æƒ…å†µ
    if (num1 == null || num1.length == 0) return 0;
    if (num2 == null || num2.length == 0) return 0;
    //è®°å½•num1çš„å‰iä¸ªå…ƒç´ å’Œnum2çš„å‰jä¸ªå…ƒç´ é—´çš„æœ€é•¿å…¬å…±å­åºåˆ—
    int[][] dp = new int[num1.length + 1][num2.length + 1];
    for (int i = 1; i <= num1.length; i++) {
        for (int j = 1; j <= num2.length; j++) {
            //å¦‚æœç¬¬iä¸ªå…ƒç´ å’Œç¬¬jä¸ªå…ƒç´ ç›¸åŒ
            if (num1[i-1] == num2[j - 1]){
                dp[i][j] = dp[i-1][j-1]+1;
            }else {
                dp[i][j] = Math.max(dp[i-1][j],dp[i][j-1]);
            }
        }
    }
    //è¿”å›ç¬¬num1çš„å‰num1.lengthä¸ªå…ƒç´ å’Œnum2çš„å‰num2.lengthä¸ªå…ƒç´ ä¹‹å‰çš„æœ€é•¿å…¬å…±å­åºåˆ—
    return dp[num1.length][num2.length];
}
```

- ç¼ºç‚¹ï¼šæ¯æ¬¡éƒ½åªç”¨åˆ°ä¸¤è¡Œæ•°ç»„ï¼Œæ‰€ä»¥æµªè´¹å¾ˆå¤šç©ºé—´

## ä¼˜åŒ–1 â€“ æ»šåŠ¨æ•°ç»„

- ä¼˜åŒ–ç©ºé—´æ¶ˆè€—

```java
static int lcs3(int[] nums1, int[] nums2) {
    if (nums1 == null || nums1.length == 0) return 0;
    if (nums2 == null || nums2.length == 0) return 0;
    int[][] dp = new int[2][nums2.length + 1];
    for (int i = 1; i <= nums1.length; i++) {
        int row = i & 1;
        int prevRow = (i - 1) & 1;
        for (int j = 1; j <= nums2.length; j++) {
            if (nums1[i - 1] == nums2[j - 1]) {
                dp[row][j] = dp[prevRow][j - 1] + 1;
            } else {
                dp[row][j] = Math.max(dp[prevRow][j], dp[row][j - 1]);
            }
        }
    }
    return dp[nums1.length & 1][nums2.length];
}
```

## ä¼˜åŒ–2 â€“ ä¸€ç»´æ•°ç»„

- ä¼˜åŒ–ç©ºé—´æ¶ˆè€—

```java
static int lcs4(int[] nums1, int[] nums2) {
    if (nums1 == null || nums1.length == 0) return 0;
    if (nums2 == null || nums2.length == 0) return 0;
    int[] dp = new int[nums2.length + 1];
    for (int i = 1; i <= nums1.length; i++) {
        int cur = 0;
        for (int j = 1; j <= nums2.length; j++) {
            int leftTop = cur;
            cur = dp[j];
            if (nums1[i - 1] == nums2[j - 1]) {
                dp[j] = leftTop + 1;
            } else {
                dp[j] = Math.max(dp[j], dp[j - 1]);
            }
        }
    }
    return dp[nums2.length];
}
```

# æœ€é•¿å…¬å…±å­ä¸²

- æœ€é•¿å…¬å…±å­ä¸²ï¼ˆLongest Common Substringï¼‰ 
- å­ä¸²æ˜¯è¿ç»­çš„å­åºåˆ—
- æ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²é•¿åº¦ 
- ABCBA å’Œ BABCA çš„æœ€é•¿å…¬å…±å­ä¸²æ˜¯ ABCï¼Œé•¿åº¦ä¸º 3

## æ€è·¯

![image-20200318001317037](å›¾ç‰‡.assets/image-20200318001317037.png)

## ä¸€èˆ¬å®ç°

![image-20200318001350767](å›¾ç‰‡.assets/image-20200318001350767.png)

```java
static int lcs1(String str1, String str2) {
    if (str1 == null || str2 == null) return 0;
    char[] chars1 = str1.toCharArray();
    if (chars1.length == 0) return 0;
    char[] chars2 = str2.toCharArray();
    if (chars2.length == 0) return 0;
    int[][] dp = new int[chars1.length + 1][chars2.length + 1];
    int max = 0;
    for (int i = 1; i <= chars1.length; i++) {
        for (int j = 1; j <= chars2.length; j++) {
            if (chars1[i - 1] != chars2[j - 1]) continue;
            dp[i][j] = dp[i - 1][j - 1] + 1;
            max = Math.max(dp[i][j], max);
        }
    }
    return max;
}
```

##  ä¸€ç»´æ•°ç»„å®ç°

- ç¼©å°ç©ºé—´ï¼Œå°†dpæ•°ç»„çš„å¤§å°è®¾ç½®ä¸ºæœ€çŸ­çš„åˆ—å¤§å°

```java
static int lcs2(String str1, String str2) {
    if (str1 == null || str2 == null) return 0;
    char[] chars1 = str1.toCharArray();
    if (chars1.length == 0) return 0;
    char[] chars2 = str2.toCharArray();
    if (chars2.length == 0) return 0;
    char[] rowsChars = chars1, colsChars = chars2;
    if (chars1.length < chars2.length) {
        colsChars = chars1;
        rowsChars = chars2;
    }

    int[] dp = new int[colsChars.length + 1];
    int max = 0;
    for (int row = 1; row <= rowsChars.length; row++) {
        int cur = 0;
        for (int col = 1; col <= colsChars.length; col++) {
            //è®°å½•ä¸‹ä¸€ä¸ªæ•°æ®çš„å·¦ä¸Šè§’å…ƒç´ å­ä¸²çš„æ•°é‡
            int leftTop = cur;
            cur = dp[col];
            if (chars1[row - 1] != chars2[col - 1]) {
                dp[col] = 0;
            } else {
                dp[col] = leftTop + 1;
                max = Math.max(dp[col], max);
            }
        }
    }
    return max;
}
```

# 0-1èƒŒåŒ…

- æœ‰ n ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤§æ‰¿é‡ä¸º W çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“çš„é‡é‡æ˜¯ ğ‘¤iã€ä»·å€¼æ˜¯ ğ‘£i 
- åœ¨ä¿è¯æ€»é‡é‡ä¸è¶…è¿‡ W çš„å‰æä¸‹ï¼Œé€‰æ‹©æŸäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼ŒèƒŒåŒ…çš„æœ€å¤§æ€»ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ 
- æ³¨æ„ï¼šæ¯ä¸ªç‰©å“åªæœ‰ 1 ä»¶ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹© 0 ä»¶æˆ–è€… 1 ä»¶
-  å‡è®¾ values æ˜¯ä»·å€¼æ•°ç»„ï¼Œweights æ˜¯é‡é‡æ•°ç»„ 
  - ç¼–å·ä¸º k çš„ç‰©å“ï¼Œä»·å€¼æ˜¯ values[k]ï¼Œé‡é‡æ˜¯ weights[k]ï¼Œk âˆˆ [0, n)

![image-20200319185521357](å›¾ç‰‡.assets/image-20200319185521357.png)

## åŠ¨æ€è§„åˆ’å®ç°

![image-20200319185623153](å›¾ç‰‡.assets/image-20200319185623153.png)

```java
static int maxValue1(int[] values, int[] weights, int capacity) {
    if (values == null || values.length == 0) return 0;
    if (weights == null || weights.length == 0) return 0;
    if (values.length != weights.length || capacity <= 0) return 0;
    int[][] dp = new int[values.length + 1][capacity + 1];
    for (int i = 1; i <= values.length; i++) {
        for (int j = 1; j <= capacity; j++) {
            if (j < weights[i - 1]) {
                dp[i][j] = dp[i - 1][j];
            } else {
                dp[i][j] = Math.max(
                    dp[i - 1][j], 
                    values[i - 1] + dp[i - 1][j - weights[i - 1]]);
            }
        }
    }
    return dp[values.length][capacity];
}
```

## ä¸€ç»´æ•°ç»„

- dp(i, j) éƒ½æ˜¯ç”± dp(i â€“ 1, k) æ¨å¯¼å‡ºæ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ i è¡Œçš„æ•°æ®æ˜¯ç”±å®ƒçš„ä¸Šä¸€è¡Œç¬¬ i â€“ 1 è¡Œæ¨å¯¼å‡ºæ¥çš„ 
- å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç»´æ•°ç»„æ¥ä¼˜åŒ– 
- å¦å¤–ï¼Œç”±äº k â‰¤ j ï¼Œæ‰€ä»¥ j çš„éå†åº”è¯¥ç”±å¤§åˆ°å°ï¼Œå¦åˆ™å¯¼è‡´æ•°æ®é”™ä¹±

```java
static int maxValue2(int[] values, int[] weights, int capacity) {
    if (values == null || values.length == 0) return 0;
    if (weights == null || weights.length == 0) return 0;
    if (values.length != weights.length || capacity <= 0) return 0;
    int[] dp = new int[capacity + 1];
    for (int i = 1; i <= values.length; i++) {
        for (int j = capacity; j >= 1; j--) {
            if (j < weights[i - 1]) continue;
            dp[j] = Math.max(dp[j], values[i - 1] + dp[j - weights[i - 1]]);
        }
    }
    return dp[capacity];
}
```

## ä¸€ç»´æ•°ç»„ä¼˜åŒ–

- è§‚å¯ŸäºŒç»´æ•°ç»„è¡¨ï¼Œå¾—å‡ºç»“è®ºï¼šj çš„ä¸‹ç•Œå¯ä»¥ä» 1 æ”¹ä¸º weights[i â€“ 1]

```java
static int maxValue3(int[] values, int[] weights, int capacity) {
    if (values == null || values.length == 0) return 0;
    if (weights == null || weights.length == 0) return 0;
    if (values.length != weights.length || capacity <= 0) return 0;
    int[] dp = new int[capacity + 1];
    for (int i = 1; i <= values.length; i++) {
        //åªæœ‰å®¹é‡å¤§äºç­‰äºæœ€åä¸€ä»¶ç‰©å“çš„é‡é‡æ‰è€ƒè™‘é€‰æˆ–è€…ä¸é€‰
        for (int j = capacity; j >= weights[i - 1]; j--) {
            dp[j] = Math.max(dp[j], values[i - 1] + dp[j - weights[i - 1]]);
        }
    }
    return dp[capacity];
}
```

# 0-1èƒŒåŒ… â€“ æ°å¥½è£…æ»¡ 

- æœ‰ n ä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤§æ‰¿é‡ä¸º W çš„èƒŒåŒ…ï¼Œæ¯ä»¶ç‰©å“çš„é‡é‡æ˜¯ ğ‘¤iã€ä»·å€¼æ˜¯ ğ‘£i 
- åœ¨ä¿è¯æ€»é‡é‡æ°å¥½ç­‰äº W çš„å‰æä¸‹ï¼Œé€‰æ‹©æŸäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼ŒèƒŒåŒ…çš„æœ€å¤§æ€»ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ 
- æ³¨æ„ï¼šæ¯ä¸ªç‰©å“åªæœ‰ 1 ä»¶ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªç‰©å“åªèƒ½é€‰æ‹© 0 ä»¶æˆ–è€… 1 ä»¶

![image-20200319185737439](å›¾ç‰‡.assets/image-20200319185737439.png)

## åŠ¨æ€è§„åˆ’å®ç°

- return å¦‚æœè¿”å›-1ï¼Œä»£è¡¨æ²¡æ³•åˆšå¥½å‡‘åˆ°capacityè¿™ä¸ªå®¹é‡

```java
static int maxValueExactly(int[] values, int[] weights, int capacity) {
    if (values == null || values.length == 0) return 0;
    if (weights == null || weights.length == 0) return 0;
    if (values.length != weights.length || capacity <= 0) return 0;
    int[] dp = new int[capacity + 1];
    for (int j = 1; j <= capacity; j++) {
        dp[j] = Integer.MIN_VALUE;
    }
    for (int i = 1; i <= values.length; i++) {
        for (int j = capacity; j >= weights[i - 1]; j--) {
            dp[j] = Math.max(dp[j], values[i - 1] + dp[j - weights[i - 1]]);
        }
    }
    return dp[capacity] < 0 ? -1 : dp[capacity];
}
```

