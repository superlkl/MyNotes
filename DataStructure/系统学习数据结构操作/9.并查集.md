# å¹¶æŸ¥é›†

- å‡è®¾æœ‰nä¸ªæ‘åº„ï¼Œæœ‰äº›æ‘åº„ä¹‹é—´æœ‰è¿æ¥çš„è·¯ï¼Œæœ‰äº›æ‘åº„ä¹‹é—´å¹¶æ²¡æœ‰è¿æ¥çš„è·¯

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223145558851.png)

- è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ‰§è¡Œ2ä¸ªæ“ä½œ
  - æŸ¥è¯¢2ä¸ªæ‘åº„ä¹‹é—´æ˜¯å¦æœ‰è¿æ¥çš„è·¯
  - è¿æ¥2ä¸ªæ‘åº„
-  æ•°ç»„ã€é“¾è¡¨ã€å¹³è¡¡äºŒå‰æ ‘ã€é›†åˆï¼ˆSetï¼‰ï¼Ÿ 
  - æŸ¥è¯¢ã€è¿æ¥çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ï¼šO(n)
- å¹¶æŸ¥é›†èƒ½å¤ŸåŠåˆ°æŸ¥è¯¢ã€è¿æ¥çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O Î± n ï¼ŒÎ± n < 5 
-  å¹¶æŸ¥é›†éå¸¸é€‚åˆè§£å†³è¿™ç±»â€œè¿æ¥â€ç›¸å…³çš„é—®é¢˜

## æ¦‚å¿µ

- å¹¶æŸ¥é›†ä¹Ÿå«ä½œä¸ç›¸äº¤é›†åˆï¼ˆDisjoint Setï¼‰
- å¹¶æŸ¥é›†æœ‰2ä¸ªæ ¸å¿ƒæ“ä½œ 
  - æŸ¥æ‰¾ï¼ˆFindï¼‰ï¼šæŸ¥æ‰¾å…ƒç´ æ‰€åœ¨çš„é›†åˆï¼ˆè¿™é‡Œçš„é›†åˆå¹¶ä¸æ˜¯ç‰¹æŒ‡Setè¿™ç§æ•°æ®ç»“æ„ï¼Œæ˜¯æŒ‡å¹¿ä¹‰çš„æ•°æ®é›†åˆï¼‰ 
  - åˆå¹¶ï¼ˆUnionï¼‰ï¼šå°†ä¸¤ä¸ªå…ƒç´ æ‰€åœ¨çš„é›†åˆåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆ
-  æœ‰2ç§å¸¸è§çš„å®ç°æ€è·¯ 
  1. Quick Find 
     - æŸ¥æ‰¾ï¼ˆFindï¼‰çš„æ—¶é—´å¤æ‚åº¦ï¼šO(1) 
     - åˆå¹¶ï¼ˆUnionï¼‰çš„æ—¶é—´å¤æ‚åº¦ï¼šO(n)
  2. Quick Union 
     - æŸ¥æ‰¾ï¼ˆFindï¼‰çš„æ—¶é—´å¤æ‚åº¦ï¼šO(logn)ï¼Œå¯ä»¥ä¼˜åŒ–è‡³ O (ğ›¼(ğ‘›)) ï¼ŒÎ±(ğ‘›) < 5 
     - åˆå¹¶ï¼ˆUnionï¼‰çš„æ—¶é—´å¤æ‚åº¦ï¼šO(logn)ï¼Œå¯ä»¥ä¼˜åŒ–è‡³ O( ğ›¼( ğ‘›)) ï¼ŒÎ±(ğ‘›) < 5 

## å‚¨å­˜æ•°æ®

-  å‡è®¾å¹¶æŸ¥é›†å¤„ç†çš„æ•°æ®éƒ½æ˜¯æ•´å‹ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨æ•´å‹æ•°ç»„æ¥å­˜å‚¨æ•°æ®

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020022314561896.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

- å› æ­¤ï¼Œå¹¶æŸ¥é›†æ˜¯å¯ä»¥ç”¨æ•°ç»„å®ç°çš„æ ‘å½¢ç»“æ„ï¼ˆäºŒå‰å †ã€ä¼˜å…ˆçº§é˜Ÿåˆ—ä¹Ÿæ˜¯å¯ä»¥ç”¨æ•°ç»„å®ç°çš„æ ‘å½¢ç»“æ„ï¼‰

## æ¥å£

```java
//æŸ¥æ‰¾æ‰€å±çš„é›†åˆï¼Œå³æ ¹èŠ‚ç‚¹
int find(int v);

//åˆå¹¶v1,v2æ‰€å±çš„é›†åˆ
void union(int v1 ,int v2);

//åˆ¤æ–­v1,v2æ˜¯å¦å±äºåŒä¸€ä¸ªé›†åˆ
boolean isSame(int v1 , int v2);
```

## åˆå§‹åŒ–

- åˆå§‹åŒ–æ—¶ï¼Œæ¯ä¸ªå…ƒç´ å„è‡ªå±äºä¸€ä¸ªå•å…ƒç´ é›†åˆ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223145631388.png)

```java
public abstract class UnionFind {

    //ç”¨æ¥å‚¨å­˜çˆ¶èŠ‚ç‚¹çš„æ•°ç»„
    int[] parents;

    //åœ¨å¹¶æŸ¥é›†åˆ›å»ºæ—¶ç»™å®šæ•°ç»„å¤§å°
    UnionFind(int capacity){
        //å…ˆæ£€æŸ¥å®¹é‡æ˜¯å¦åˆæ³•
        if (capacity<1) {
            //æŠ›å‡ºè‡ªå®šä¹‰çš„å‚æ•°å¼‚å¸¸
            throw new IllegalArgumentException("å‚æ•°å¼‚å¸¸");
        }
        parents = new int[capacity];
        //åˆå§‹åŒ–é›†åˆï¼Œä¸€å¼€å§‹æ¯ä¸ªå…ƒç´ å•ç‹¬å±äºä¸€ä¸ªç»“åˆ
        for (int i = 0; i < capacity; i++) {
            parents[i]=i;
        }
    }

    //æŸ¥æ‰¾æ‰€å±çš„é›†åˆï¼Œå³æ ¹èŠ‚ç‚¹
    abstract int find(int v);

    //åˆå¹¶v1,v2æ‰€å±çš„é›†åˆ
    abstract void union(int v1 ,int v2);

    //åˆ¤æ–­v1,v2æ˜¯å¦å±äºåŒä¸€ä¸ªé›†åˆ
    boolean isSame(int v1 , int v2){
        //ç›´æ¥æ¯”è¾ƒä»–ä»¬çš„æ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ
        return find(v1) == find(v2);
    }
    
    //æ£€æŸ¥æ•°æ®æ˜¯å¦è¶Šç•Œ
    protected void rangOfCheck(int v){
        if (v<0||v>parents.length){
            //æŠ›å‡ºæ•°ç»„è¶Šç•Œé”™è¯¯
            throw new IndexOutOfBoundsException("æ•°ç»„ç´¢å¼•è¶Šç•Œ");
        }
    }
}
```

## Quick Find â€“ Union

- Quick Find çš„ union(v1, v2)ï¼šè®© v1 æ‰€åœ¨é›†åˆçš„æ‰€æœ‰å…ƒç´ éƒ½æŒ‡å‘ v2 çš„æ ¹èŠ‚ç‚¹

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223145704161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

```java
/*
æŸ¥æ‰¾å¾ˆå¿«ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1),åˆå¹¶é›†åˆè¾ƒæ…¢ï¼Œä¸ºO(n)
 */
public class UnionFind_QF extends UnionFind{

    public UnionFind_QF(int capacity) {
        super(capacity);
    }

    /*
    è¿”å›æ ¹èŠ‚ç‚¹
     */
    @Override
    public int find(int v) {
        //æ£€æŸ¥
        rangOfCheck(v);
        //è¿”å›çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿæ˜¯æ ¹èŠ‚ç‚¹
        return parents[v];
    }

    /**
     * å°†v1æ‰€åœ¨é›†åˆçš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½å«æ¥åˆ°v2çš„çˆ¶èŠ‚ç‚¹ä¸Š
     */
    @Override
    public void union(int v1, int v2) {
        //åˆ†è¢«æ‰¾åˆ°v1å’Œv2çš„æ ¹èŠ‚ç‚¹
        int p1=find(v1);
        int p2=find(v2);

        //å¦‚æœæ ¹èŠ‚ç‚¹ç›¸åŒè¯´æ˜å±äºåŒä¸€ä¸ªé›†åˆ
        if (p1==p2) return;
        //å¦‚æœä¸ç›¸åŒåˆ™å°†v1æ‰€åœ¨é›†åˆçš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½å«æ¥åˆ°v2çš„çˆ¶èŠ‚ç‚¹ä¸Š
        //éå†æ•´ä¸ªæ ¹èŠ‚ç‚¹é›†åˆ
        for (int i = 0; i < parents.length; i++) {
            //æŠŠæ ¹èŠ‚ç‚¹å’Œv1ç›¸åŒçš„å…ƒç´ å…¨éƒ½æ”¹ä¸ºv2çš„æ ¹èŠ‚ç‚¹
            if (parents[i]==p1){
                parents[i]=p2;
            }
        }
    }
}
```

## Quick Union â€“ Find 

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223155735755.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)



```java
/*
åˆå¹¶ä¸¤ä¸ªé›†åˆå¾ˆå¿«ï¼ŒæŸ¥æ‰¾é›†åˆè¾ƒæ…¢
 */
public class UnionFind_QU extends UnionFind {
    public UnionFind_QU(int capacity) {
        super(capacity);
    }

    /**
     * é€šè¿‡parenté“¾æ¡ä¸æ–­åœ°å‘ä¸Šæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æ ¹èŠ‚ç‚¹
     */
    @Override
    public int find(int v) {
        rangOfCheck(v);
        //åˆå§‹åŒ–çš„å…ƒç´ è‡ªå·±å°±æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå½“æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ çš„æ ¹èŠ‚ç‚¹å°±æ˜¯è‡ªå·±æ—¶å°±ç¡®å®šäº†è¿™ä¸€é“¾æ¡ä¸Šçš„æ ¹èŠ‚ç‚¹
        while (v!=parents[v]){
            //å¾€ä¸Šæ‰¾
            v=parents[v];
        }
        return v;
    }

    /**
     * å°†v1çš„æ ¹èŠ‚ç‚¹å«æ¥åˆ°v2çš„æ ¹èŠ‚ç‚¹ä¸Š
     */
    @Override
    public void union(int v1, int v2) {
        //æ‰¾åˆ°å„è‡ªçš„æ ¹èŠ‚ç‚¹
        int p1=find(v1);
        int p2=find(v2);
        if (p1==p2) return;
        parents[p1]=p2;
    }
}
```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223155749930.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

- è¿™æ ·è®¾è®¡åæŸ¥æ‰¾å’Œåˆå¹¶é›†åˆçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(logn)

## å¯¹æ¯”ä¸€

- å¯¹äºç¬¬ä¸€ç§è®¾è®¡æ–¹å¼ï¼Œç”Ÿæˆçš„æ ‘ç»“æ„æ°¸è¿œåªæœ‰ä¸¤å±‚ï¼Œæ¯ä¸ªå…ƒç´ å‚¨å­˜çš„å°±æ˜¯ä»–çš„æ ¹èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾æ“ä½œåªéœ€ä¸€æ­¥å³å¯ï¼›ä½†æ˜¯åˆå¹¶æ—¶éœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°æ‰€æœ‰æ ¹èŠ‚ç‚¹ç›¸åŒçš„å…ƒç´ å¹¶ä¿®æ”¹ä¸ºå¦ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿™å°±å¾ˆè€—æ—¶ã€‚
- å¯¹äºç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨åˆå¹¶æ—¶åªéœ€è¦æ”¹å˜å½“å‰è¢«åˆå¹¶å…ƒç´ çš„æ ¹èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾æ“ä½œè·Ÿæ ‘çš„é«˜åº¦ç›¸å…³ï¼Œè€—æ—¶æ¯”è¾ƒç¨³å®š

## ä¼˜åŒ–ä¸€

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223155856787.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

### åŸºäºsize(é›†åˆçš„æ•°é‡)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223155917167.png)

```java
/*
åœ¨Quick Unionçš„åŸºç¡€ä¸Š - åŸºäºsizeçš„ä¼˜åŒ–
 */
public class UnionFind_QU_Size extends UnionFind_QU{

    //å‚¨å­˜æ¯ä¸ªé›†åˆçš„å¤§å°
    private int[] size;

    public UnionFind_QU_Size(int capacity) {
        super(capacity);
        //åˆå§‹åŒ–é›†åˆçš„å¤§å°,æ¯ä¸ªé›†åˆå¤§å°é»˜è®¤ä¸º1
        size=new int[capacity];
        for (int i : size) {
            size[i]=1;
        }
    }

    /**
     * æŸ¥æ‰¾æ“ä½œæ˜¯ä¸å˜çš„ï¼Œåªæ˜¯åœ¨åˆå¹¶é›†åˆæ—¶æˆ‘ä»¬è¦ä¼˜å…ˆé€‰æ‹©æ•°æ®å…ƒç´ å°‘çš„ä¸æ•°æ®å…ƒç´ å¤šçš„åˆå¹¶
     * å°†v1çš„æ ¹èŠ‚ç‚¹å«æ¥åˆ°v2çš„æ ¹èŠ‚ç‚¹ä¸Š
     */
    @Override
    public void union(int v1, int v2) {
        //æ‰¾åˆ°å„è‡ªçš„çˆ¶èŠ‚ç‚¹
        int p1=find(v1);
        int p2=find(v2);
        if (p1==p2) return;
        //å¦‚æœp1é›†åˆçš„å…ƒç´ æ•°é‡æ¯”p2é›†åˆçš„å…ƒç´ æ•°é‡å°‘
        if (size[p1]<size[p2]){
            //æŠŠp1é›†åˆçš„æ ¹èŠ‚ç‚¹æ”¹ä¸ºp2
            parents[p1]=p2;
            //p2çš„é›†åˆå˜å¤§
            size[p2]=size[p1]+size[p2];
        }else {
            //å’Œä¸Šé¢åè¿‡æ¥
            parents[p2]=p1;
            size[p1]+=size[p2];
        }
    }
}
```

### åŸºäºrank(æ ‘çš„é«˜åº¦)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020022316434798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

```java
/*
åœ¨Quick Unionçš„åŸºç¡€ä¸Š - åŸºäºrankçš„ä¼˜åŒ–
 */
public class UnionFind_QU_Rank extends UnionFind_QU {

    //è®°å½•ä¸åŒæ ‘çš„é«˜åº¦
    private int[] rank;

    public UnionFind_QU_Rank(int capacity) {
        super(capacity);
        //æ¯æ£µæ ‘åˆå§‹åŒ–é«˜åº¦ä¸º1
        for (int i = 0; i < capacity; i++) {
            rank[i]=1;
        }
    }

    @Override
    public void union(int v1, int v2) {
        //å…ˆæ‰¾åˆ°å„è‡ªçš„æ ¹èŠ‚ç‚¹
        int p1=find(v1);
        int p2=find(v2);
        if (p1==p2) return;

        //çŸ®çš„æ•°å«æ¥åˆ°é«˜çš„æ ‘ä¸Š
        if (rank[p1]<rank[p2]){
            parents[p1]=p2;
        }else if (rank[p1]>rank[p2]){
            parents[p2]=p1;
        }else {
            //ä¸¤æ£µæ ‘é«˜åº¦ç›¸ç­‰çš„æƒ…å†µ,è°å«æ¥åˆ°è°éƒ½æ— æ‰€è°“
            parents[p1]=p2;
            //é‡è¦çš„æ˜¯æ ‘çš„æ•´ä½“é«˜åº¦ä¼šå¢åŠ 1
            rank[p2]+=1;
        }
    }
}
```

### è·¯å¾„å‹ç¼©ï¼ˆPath Compression)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223164556433.png)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223164616279.png)



- è™½ç„¶æœ‰äº†åŸºäºrankçš„ä¼˜åŒ–ï¼Œæ ‘ä¼šç›¸å¯¹å¹³è¡¡ä¸€ç‚¹ä½†æ˜¯éšç€Unionæ¬¡æ•°çš„å¢å¤šï¼Œæ ‘çš„é«˜åº¦ä¾ç„¶ä¼šè¶Šæ¥è¶Šé«˜ï¼Œå¯¼è‡´findæ“ä½œå˜æ…¢ï¼Œå°¤å…¶æ˜¯åº•å±‚èŠ‚ç‚¹ï¼ˆå› ä¸ºfindæ˜¯ä¸æ–­å‘ä¸Šæ‰¾åˆ°æ ¹èŠ‚ç‚¹ï¼‰
- ä»€ä¹ˆæ˜¯è·¯å¾„å‹ç¼©ï¼Ÿ 
  - åœ¨findæ—¶ä½¿è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æŒ‡å‘æ ¹èŠ‚ç‚¹ï¼Œä»è€Œé™ä½æ ‘çš„é«˜åº¦

```java
/*
åœ¨Quick UnionåŸºç¡€ä¸Š - è¿›è¡Œrankçš„ä¼˜åŒ– - å†è¿›è¡Œè·¯å¾„å‹ç¼©(Path Compression)ä¼˜åŒ–
 */
public class UnionFind_QU_Rank_Path extends UnionFind_QU_Rank {

    public UnionFind_QU_Rank_Path(int capacity) {
        super(capacity);
    }

    @Override
    public int find(int v) {
        rangOfCheck(v);
        // å‡å¦‚1çš„çˆ¶èŠ‚ç‚¹æ˜¯2åˆ™æœ‰ï¼šv == 1, parents[v] == 2
        if (parents[v] != v) {
            parents[v] = find(parents[v]);
        }
        return parents[v];
    }
}
```

- è·¯å¾„å‹ç¼©ä½¿è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æŒ‡å‘æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥å®ç°æˆæœ¬ç¨é«˜
- è¿˜æœ‰2ç§æ›´ä¼˜çš„åšæ³•ï¼Œä¸ä½†èƒ½é™ä½æ ‘é«˜ï¼Œå®ç°æˆæœ¬ä¹Ÿæ¯”è·¯å¾„å‹ç¼©ä½ 
  - è·¯å¾„åˆ†è£‚ï¼ˆPath Splitingï¼‰ 
  - è·¯å¾„å‡åŠï¼ˆPath Halvingï¼‰
  -  è·¯å¾„åˆ†è£‚ã€è·¯å¾„å‡åŠçš„æ•ˆç‡å·®ä¸å¤šï¼Œä½†éƒ½æ¯”è·¯å¾„å‹ç¼©è¦å¥½ 

## ä¼˜åŒ–äºŒ

### è·¯å¾„åˆ†è£‚

- Path Spliting

- è·¯å¾„åˆ†è£‚ï¼šä½¿è·¯å¾„ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æŒ‡å‘å…¶ç¥–çˆ¶èŠ‚ç‚¹ï¼ˆparentçš„parentï¼‰



![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200223164722862.png)

```java
/*
Quick Union - åŸºäºrankçš„ä¼˜åŒ– - è·¯å¾„åˆ†è£‚(Path Split)
 */
public class UnionFind_QU_Rank_Path_Split extends UnionFind_QU_Rank {

    public UnionFind_QU_Rank_Path_Split(int capacity) {
        super(capacity);
    }
    @Override
    public int find(int v) {
        rangOfCheck(v);
        while (v != parents[v]) {
            int p = parents[v];
            parents[v] = parents[parents[v]];
            v = p;
        }
        return v;
    }
}
```

### è·¯å¾„å‡åŠ

- Path Halving
- è·¯å¾„å‡åŠï¼šä½¿è·¯å¾„ä¸Šæ¯éš”ä¸€ä¸ªèŠ‚ç‚¹å°±æŒ‡å‘å…¶ç¥–çˆ¶èŠ‚ç‚¹ï¼ˆparentçš„parentï¼‰



![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020022509262632.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0MjU3Mzgz,size_16,color_FFFFFF,t_70)

```java
/*
Quick Union - åŸºäºrankçš„ä¼˜åŒ– - è·¯å¾„å‡åŠ(Path Halving)
 */
public class UnionFind_QU_Rank_Path_Halving extends UnionFind_QU_Rank {
    public UnionFind_QU_Rank_Path_Halving(int capacity) {
        super(capacity);
    }


    @Override
    public int find(int v) {
        rangOfCheck(v);
        while (v != parents[v]) {
            parents[v] = parents[parents[v]];
            v = parents[v];
        }
        return v;
    }
}
```

## æ€»ç»“

- å»ºè®®çš„æ­é… 
  - Quick Union +
  - åŸºäº rank çš„ä¼˜åŒ– +
  - Path Halving æˆ– Path Spliting

## è‡ªå®šä¹‰ç±»å‹

- ä¹‹å‰çš„ä½¿ç”¨éƒ½æ˜¯åŸºäºæ•´å‹æ•°æ®ï¼Œå¦‚æœå…¶ä»–è‡ªå®šä¹‰ç±»å‹ä¹Ÿæƒ³ä½¿ç”¨å¹¶æŸ¥é›†å‘¢ï¼Ÿ 
  - æ–¹æ¡ˆä¸€ï¼šé€šè¿‡ä¸€äº›æ–¹æ³•å°†è‡ªå®šä¹‰ç±»å‹è½¬ä¸ºæ•´å‹åä½¿ç”¨å¹¶æŸ¥é›†ï¼ˆæ¯”å¦‚ç”Ÿæˆå“ˆå¸Œå€¼ï¼‰ 
  - æ–¹æ¡ˆäºŒï¼šä½¿ç”¨é“¾è¡¨+æ˜ å°„ï¼ˆMapï¼‰ 