# 语法须知

- C++的源文件扩展名是：cpp（c plus plus的简称）
- C++程序的入口是main函数（函数即方法，一个意思）
-  C++完全兼容C语言的语法，很久以前，C++叫做C with classes

**对比：**

- java必须先有类再有函数，而C++不需要先创建一个类，直接以main函数作为程序入口



```C++
#include <iostream>
using namespace std;
int main() {

	//往屏幕输出
	cout << "hello world"<<endl;
	int age;
	//箭头指向地址，从键盘输入
	cin >> age;
	cout << age << endl;
	//暂停系统，不让main函数退出
	system("pause");//也可以换为 return getchar();
	return 0;
}
```

# 函数重载（Overload）

**规则 ：**

- 函数名相同 
  - 参数个数不同、参数类型不同、参数顺序不同
- 注意 ：
  - 返回值类型与函数重载无关 
  - 调用函数时，实参的隐式类型转换可能会产生二义性
- 本质 ：
  - 采用了name mangling或者叫name decoration技术 
  - C++编译器默认会对符号名（比如函数名）进行改编、修饰，有些地方翻译为“命名倾轧” 
  - 重载时会生成多个不同的函数名，不同编译器（MSVC、g++）有不同的生成规则 
  - 通过IDA打开【VS_Release_禁止优化】可以看到

```C++
//汇编语言会根据参数不同给函数重新命名，例如：

//转汇编语言变成 sum_0
int sum(int a, int b) {
	return a + b;
}
//变成 sum_1,这样编译器就能识别不同的重载函数了
int sum(int a, int b, int c) {
	return a + b + c;
}
```

# 默认参数 

- C++允许函数设置默认参数，在调用时可以根据情况省略实参。规则如下： 
  - 默认参数只能按照右到左的顺序 
  - **如果函数同时有声明、实现，默认参数只能放在函数声明中** 
  - 默认参数的值可以是常量、全局符号（全局变量、函数名） 

```C++
int sum(int a=5, int b=6) {
	return a + b;
}

int main() {

	cout << sum() << endl;
	cout << sum(10, 20) << endl;
	system("pause");
	return 0;
}
```

- 如果同时有声明和默认实现，那么默认实现只能写在声明里面

```C++
//函数声明,必须在main函数之前
int sum(int a = 5, int b = 6);

int main() {

	cout << sum() << endl;
	cout << sum(10, 20) << endl;
	system("pause");
	return 0;
}
//函数实现
int sum(int a , int b ) {
	return a + b;
}
```

- 把函数传递给指针

```C++
void test(int a) {
	cout << "test(int)" << a << endl;
}

int main() {
	//定义一个指针指向test方法所在的地址
	void(*p)(int) = test;
	//传入参数，相当于调用函数
	p(10);
	system("pause");
	return 0;
}
```

- 函数也可以当做默认值

```C++
//被func函数调用，一定要放在其前面才行
void test(int a) {
	cout << "test(int)" << a << endl;
}
void test2(int) {
	cout << "test2" << endl;
}
//函数的地址也可以当做默认值
void func(int v, void(*p)(int) = test) {
	p(v);
}

int main() {
   //第二个参数有默认值，可以不传参数
	func(10);
	func(20,test2);
	system("pause");
	return 0;
}
```

- 函数重载、默认参数可能会产生冲突、二义性（建议优先选择使用默认参数）

![image-20200224185604025](图片.assets/image-20200224185604025.png)